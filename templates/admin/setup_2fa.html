{% extends "admin/login.html" %}

{% block content %}
  <form action="" method="post" class="md:mt-4 text-center">
    {% csrf_token %}

    {% if otp_secret %}
    <div class="space-y-4">
      <p><strong>OTP Secret:</strong></p>
      <p>{{ otp_secret }}</p>
      <p>Enter it inside a 2FA app (Google Authenticator, Authy) or scan the QR code below.</p>
    </div>
    <div class="flex items-center justify-center mt-6 w-full">
      {{ qr_code|safe }}
    </div>
    {% else %}
      {% if form_errors %}
        {% for error in form_errors %}
          <p class="errornote">
            {{ error }}
          </p>
        {% endfor %}
      {% else %}
        <label>Click the button generate a 2FA application code.</label>
      {% endif %}
    {% endif %}

    {% if not form_errors %}
      <div class="mt-4 md:mt-6">
        <input type="submit" value="Generate">
      </div>
    {% endif %}
  </form>
{% endblock %}
